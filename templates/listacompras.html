{% extends 'base.html' %}

{% block content %}
    <div class="container mt-4">
        <h1 class="text-center">Consulta de Producto</h1>

        <form class="container-md-4" action="/consulta" method="post">
            <div class="form-group">
                <label for="cedula">Cedula:</label>
                <div class="form-inline">
                    <input type="text" class="form-control" style="width: 1000px;" name="cc" placeholder="Ingrese su cedula" required>
                    <button type="submit" class="btn btn-warning mx-3">Buscar</button>
                </div>
            </div>
        </form>

        <p class="text-center my-4 display-4">Productos adquiridos</p>

        {% if productos_familiar %}
        <div class="black-bar"></div>
            <h3 class="mt-4">Productos Familiares:</h3>
            <div class="table-responsive">
                <table class="table">
                    <thead>
                        <tr class="text-warning" style="background-color: #383434;">
                            <th>Nombre</th>
                            <th>Apellido</th>
                            <th>Nombre Producto</th>
                            <th>Descripción</th>
                            <th>Precio</th>
                            <th>Fecha Creación</th>
                            <th>Fecha Expiración</th>
                            <th>Estado de producto</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for producto in productos_familiar %}
                            <tr>
                                <td>{{ producto[2] }}</td>
                                <td>{{ producto[3] }}</td>
                                <td>{{ producto[5] }}</td>
                                <td>{{ producto[6] }}</td>
                                <td>{{ producto[7] }}</td>
                                <td>{{ producto[8] }}</td>
                                <td>{{ producto[9] }}</td>
                                <td>{{ producto[10] }}</td>
                                <td>
                                    {% if producto[10] == 'Activo' %}
                                        <a href="/iniciar_sesion?bd=Familiar&id_producto={{ producto[0] }}&cedula={{ producto[1] }}&nombre_del_producto={{ producto[5] }}" class="btn btn-danger btn-sm">Cancelar</a>
                                    {% elif producto[10] == 'Cancelado' %}
                                        <a href="/renovar_servicio?id_producto={{ producto[0] }}" class="btn btn-success btn-sm">Renovar</a>
                                    {% endif %}  
                                </td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        {% endif %}


        {% if productos_internet %}
        <div class="black-bar"></div>
            <h3 class="mt-4">Productos de Internet:</h3>
            <div class="table-responsive">
                <table class="table">
                    <thead>
                        <tr class="text-warning" style="background-color: #383434;">
                            <th>Nombre</th>
                            <th>Apellido</th>
                            <th>Nombre Producto</th>
                            <th>Descripción</th>
                            <th>Precio</th>
                            <th>Fecha Creación</th>
                            <th>Fecha Expiración</th>
                            <th>Estado de producto</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for producto in productos_internet %}
                            <tr>
                                <td>{{ producto[2] }}</td>
                                <td>{{ producto[3] }}</td>
                                <td>{{ producto[5] }}</td>
                                <td>{{ producto[6] }}</td>
                                <td>{{ producto[7] }}</td>
                                <td>{{ producto[8] }}</td>
                                <td>{{ producto[9] }}</td>
                                <td>{{ producto[10] }}</td>
                                <td>
                                    {% if producto[10] == 'Activo' %}
                                        <a href="/iniciar_sesion?bd=Internet&id_producto={{ producto[0] }}&cedula={{ producto[1] }}&nombre_del_producto={{ producto[5] }}" class="btn btn-danger btn-sm">Cancelar</a>
                                    {% elif producto[10] == 'Cancelado' %}
                                        <a href="/renovar_servicio?id_producto={{ producto[0] }}" class="btn btn-success btn-sm">Renovar</a>
                                    {% endif %}
                                </td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        {% endif %}
        
        {% if productos_entretenimiento %}
        <div class="black-bar"></div>
            <h3 class="mt-4">Productos de Entretenimiento:</h3>
            <div class="table-responsive">
                <table class="table">
                    <thead>
                        <tr class="text-warning" style="background-color: #383434;">
                            <th>Nombre</th>
                            <th>Apellido</th>
                            <th>Nombre Producto</th>
                            <th>Descripción</th>
                            <th>Precio</th>
                            <th>Fecha Creación</th>
                            <th>Fecha Expiración</th>
                            <th>Estado de producto</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for producto in productos_entretenimiento %}
                            <tr>
                                <td>{{ producto[2] }}</td>
                                <td>{{ producto[3] }}</td>
                                <td>{{ producto[5] }}</td>
                                <td>{{ producto[6] }}</td>
                                <td>{{ producto[7] }}</td>
                                <td>{{ producto[8] }}</td>
                                <td>{{ producto[9] }}</td>
                                <td>{{ producto[10] }}</td>
                                <td>
                                    {% if producto[10] == 'Activo' %}
                                        <a href="/iniciar_sesion?bd=Entretenimiento&id_producto={{ producto[0] }}&cedula={{ producto[1] }}&nombre_del_producto={{ producto[5] }}" class="btn btn-danger btn-sm">Cancelar</a>
                                    {% elif producto[10] == 'Cancelado' %}
                                        <a href="/renovar_servicio?id_producto={{ producto[0] }}" class="btn btn-success btn-sm">Renovar</a>
                                    {% endif %} 
                                </td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        {% endif %}

        {% if error %}
            <p class="mt-4" style="color: red;">{{ error }}</p>
        {% endif %}
    </div>
        
    <div class="black-bar"></div>
{% endblock %}
